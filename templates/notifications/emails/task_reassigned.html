{% extends "notifications/emails/base_email.html" %}

{% block title %}Task Assigned to You - {{ task.reference_number }}{% endblock %}

{% block content %}
<h2>A Task Has Been Assigned to You</h2>

<p>Hello {{ new_assignee_name }},</p>

<p>A task has been reassigned to you by <strong>{{ reassigned_by_name }}</strong>{% if reassigned_by_department %} ({{ reassigned_by_department }}){% endif %}. Please review the details below:</p>

<div class="task-details">
    <h3 style="margin: 0 0 16px 0; color: #1e3a5f; font-size: 18px;">{{ task.title }}</h3>
    
    <table style="width: 100%; border-collapse: collapse; margin: 0;">
        <tr>
            <td style="padding: 8px 0; color: #64748b; width: 130px;">Reference:</td>
            <td style="padding: 8px 0; color: #1e293b; font-weight: 500;">{{ task.reference_number }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; color: #64748b;">Priority:</td>
            <td style="padding: 8px 0;">
                <span style="display: inline-block; padding: 4px 12px; border-radius: 4px; font-size: 13px; font-weight: 600; color: #ffffff; background-color: {{ priority_info.color }};">
                    {{ priority_info.name }}
                </span>
            </td>
        </tr>
        <tr>
            <td style="padding: 8px 0; color: #64748b;">Deadline:</td>
            <td style="padding: 8px 0; color: {% if has_deadline %}#1e293b{% else %}#94a3b8{% endif %}; font-weight: {% if has_deadline %}500{% else %}400{% endif %};">
                {{ deadline_formatted }}
            </td>
        </tr>
        <tr>
            <td style="padding: 8px 0; color: #64748b;">Reassigned by:</td>
            <td style="padding: 8px 0; color: #1e293b;">{{ reassigned_by_name }}</td>
        </tr>
    </table>
    
    {% if description_truncated %}
    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e2e8f0;">
        <p style="margin: 0 0 8px 0; color: #64748b; font-size: 14px;">Description:</p>
        <p style="margin: 0; color: #475569; white-space: pre-wrap;">{{ description_truncated }}</p>
    </div>
    {% endif %}
</div>

<!-- Info notice about reassignment -->
<div style="background-color: #eff6ff; border-left: 4px solid #3b82f6; border-radius: 4px; padding: 16px; margin: 24px 0;">
    <p style="margin: 0; color: #1e40af; font-size: 14px;">
        <strong>Note:</strong> This task has been reassigned to you. Please review the task details and deadline, then proceed with the work.
    </p>
</div>

<div class="button-container">
    <a href="{{ task_url }}" class="button">View Task</a>
</div>

<p style="color: #64748b; font-size: 14px;">
    Click the button above to view the full task details and get started.
</p>
{% endblock %}
